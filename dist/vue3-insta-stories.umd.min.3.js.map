{"version":3,"sources":["webpack://vue3-insta-stories/./lib/components/Story.vue","webpack://vue3-insta-stories/./lib/components/Story.vue?a311","webpack://vue3-insta-stories/./lib/components/Story.vue?5635","webpack://vue3-insta-stories/./lib/components/Story.vue?c720","webpack://vue3-insta-stories/./lib/components/Story.vue?f46e"],"names":["class","style","width","height","slides","slide_object","i","key","slide","currentSlideIndex","name","props","Array","duration","Number","data","timeline","autoplay","easing","isActive","methods","activate","this","resetSlide","deactivate","pause","index","undefined","seek","play","nextSlide","$emit","length","nextStory","prevSlide","previousStory","getOffset","el","_x","_y","isNaN","offsetLeft","offsetTop","scrollLeft","scrollTop","offsetParent","top","left","mounted","$timeline","$el","getElementsByClassName","forEach","$slice","add","targets","changeBegin","complete","hammer","Manager","recognizers","Pan","direction","DIRECTION_HORIZONTAL","Tap","Press","time","threshold","on","event","center","x","isFinal","deltaX","render","content","module","locals","exports","default","___CSS_LOADER_API_IMPORT___","push"],"mappings":"+NAESA,MAAM,Y,EAEP,yBAAkC,OAA7BA,MAAM,YAAW,KAAM,G,GAG3BA,MAAM,gB,wDANb,yBASM,OATDA,MAAM,QAASC,MAAK,SAAa,EAAAC,MAAK,cAAmB,EAAAC,OAAM,O,CAClE,yBAIM,MAJN,EAIM,E,2BAHJ,yBAEM,2CAFyC,EAAAC,QAAM,SAA1BC,EAAcC,G,gCAAzC,yBAEM,OAFDN,MAAM,QAA6CO,IAAKD,G,CAC3D,O,QAGJ,yBAEM,MAFN,EAEM,CADJ,wBAAmE,kBAAzCE,MAAO,EAAAJ,OAAO,EAAAK,wB,4DAQ/B,GACbC,KAAM,QACNC,MAAO,CACLP,OAAQQ,MACRC,SAAUC,OACVZ,MAAOY,OACPX,OAAQW,QAEVC,KARa,WASX,IAAMC,EAAW,OAAMA,SAAS,CAC9BC,UAAU,EACVC,OAAQ,WAEV,MAAO,CACLT,kBAAmB,EACnBU,UAAU,EACVH,SAAUA,IAGdI,QAAS,CACPC,SAAU,WAERC,KAAKC,cAEPC,WAAY,WACVF,KAAKN,SAASS,SAEhBF,WAAY,WAEV,IAAIV,EAAW,EAQf,IAAK,IAAIa,KAASJ,KAAKlB,OAAQ,CAC7B,GAA8B,GAA1BkB,KAAKb,kBACP,MAEF,GAAIa,KAAKb,mBAAqBiB,EAC5B,WAEiCC,GAA/BL,KAAKlB,OAAOsB,GAAOb,SACrBA,GAAYS,KAAKlB,OAAOsB,GAAOb,SAE/BA,GAAYS,KAAKT,SAIrBS,KAAKN,SAASS,QACdH,KAAKN,SAASY,KAAKf,GACnBS,KAAKN,SAASa,QAEhBC,UAAW,WACTR,KAAKS,MAAM,cACPT,KAAKb,kBAAoBa,KAAKlB,OAAO4B,OAAS,GAChDV,KAAKb,oBACLa,KAAKC,cAELD,KAAKW,aAGTC,UAAW,WACTZ,KAAKS,MAAM,cACPT,KAAKb,kBAAoB,GAC3Ba,KAAKb,oBACLa,KAAKC,cAELD,KAAKa,iBAGTF,UAAW,WACTX,KAAKS,MAAM,eAEbI,cAAe,WACbb,KAAKS,MAAM,eAEbK,UA5DO,SA4DGC,GACR,IAAIC,EAAK,EACLC,EAAK,EACT,MAAOF,IAAOG,MAAMH,EAAGI,cAAgBD,MAAMH,EAAGK,WAC9CJ,GAAMD,EAAGI,WAAaJ,EAAGM,WACzBJ,GAAMF,EAAGK,UAAYL,EAAGO,UACxBP,EAAKA,EAAGQ,aAEV,MAAO,CAAEC,IAAKP,EAAIQ,KAAMT,KAG5BU,QA1Fa,WA0FH,WACJC,EAAY3B,KAAK4B,IAAIC,uBAAuB,YAAY,GAE5D7B,KAAKlB,OAAOgD,SAAQ,SAAC5C,EAAOkB,GAC1B,IAAI2B,EAASJ,EAAUE,uBAAuB,SAASzB,GACnDb,OAC6Bc,GAA/B,EAAKvB,OAAOsB,GAAOb,SACf,EAAKT,OAAOsB,GAAOb,SACnB,EAAKA,SAEX,EAAKG,SAASsC,IAAI,CAChBzC,SAAUA,EACV0C,QAASF,EAAOF,uBAAuB,YACvCjD,MAAO,OACPsD,YAAa,WAEX,EAAK/C,kBAAoBiB,GAE3B+B,SAAU,WAEJ/B,IAAU,EAAKtB,OAAO4B,OAAS,GACjC,EAAKC,kBAKbX,KAAKoC,OAAS,IAAI,IAAOC,QAAQrC,KAAK4B,IAAK,CACzCU,YAAa,CACX,CAAC,IAAOC,IAAK,CAAEC,UAAW,IAAOC,uBACjC,CAAC,IAAOC,KACR,CAAC,IAAOC,MAAO,CAAEC,KAAM,EAAGC,UAAW,SAGzC7C,KAAKoC,OAAOU,GAAG,SAAS,WACtB,EAAKpD,SAASS,WAEhBH,KAAKoC,OAAOU,GAAG,eAAe,WAC5B,EAAKpD,SAASa,UAGhBP,KAAKoC,OAAOU,GAAG,OAAO,SAACC,GACjBA,EAAMC,OAAOC,EAAI,EAAKnC,UAAU,EAAKc,KAAKH,KAAO,EAAK7C,MAAQ,EAChE,EAAK4B,YAEL,EAAKI,eAITZ,KAAKoC,OAAOU,GAAG,OAAO,SAACC,GACjBA,EAAMG,UACJH,EAAMI,OAAS,EACjB,EAAKxC,YACIoC,EAAMI,OAAS,GACxB,EAAKtC,sB,UC1Jf,EAAOuC,OAASA,EAED,gB,kCCPf,W,qBCGA,IAAIC,EAAU,EAAQ,QACA,kBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOtE,EAAIqE,EAAS,MAC7DA,EAAQE,SAAQD,EAAOE,QAAUH,EAAQE,QAE5C,IAAIvB,EAAM,EAAQ,QAA+DyB,QACpEzB,EAAI,WAAYqB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCP5E,IAAIK,EAA8B,EAAQ,QAC1CF,EAAUE,GAA4B,GAEtCF,EAAQG,KAAK,CAACL,EAAOtE,EAAI,wdAAyd,KAElfsE,EAAOE,QAAUA","file":"vue3-insta-stories.umd.min.3.js","sourcesContent":["<template>\n  <div class=\"story\" :style=\"'width:' + width + 'px; height:' + height + 'px;'\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide_object, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n    <div class=\"slideWrapper\">\n      <slot name=\"slide\" v-bind:slide=\"slides[currentSlideIndex]\"></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs/lib/anime.es.js\";\nimport Hammer from \"hammerjs\";\nexport default {\n  name: \"Story\",\n  props: {\n    slides: Array,\n    duration: Number,\n    width: Number,\n    height: Number,\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      easing: \"linear\",\n    });\n    return {\n      currentSlideIndex: 0,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  methods: {\n    activate: function () {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate: function () {\n      this.timeline.pause();\n    },\n    resetSlide: function () {\n      // Jump to beginning of the slide\n      let duration = 0;\n      // if (this.slides[this.currentSlideIndex].duration != undefined) {\n      // } else {\n      //   //Index * Default Duration\n      //   duration = this.currentSlideIndex * this.duration;\n      // }\n\n      //If custom duration is set, go through each duration and sum them togetehr\n      for (let index in this.slides) {\n        if (this.currentSlideIndex == 0) {\n          break;\n        }\n        if (this.currentSlideIndex == index) {\n          break;\n        }\n        if (this.slides[index].duration != undefined) {\n          duration += this.slides[index].duration;\n        } else {\n          duration += this.duration;\n        }\n      }\n\n      this.timeline.pause();\n      this.timeline.seek(duration);\n      this.timeline.play();\n    },\n    nextSlide: function () {\n      this.$emit(\"next_slide\");\n      if (this.currentSlideIndex < this.slides.length - 1) {\n        this.currentSlideIndex++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    prevSlide: function () {\n      this.$emit(\"prev_slide\");\n      if (this.currentSlideIndex > 0) {\n        this.currentSlideIndex--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory: function () {\n      this.$emit(\"next_story\");\n    },\n    previousStory: function () {\n      this.$emit(\"prev_story\");\n    },\n    getOffset(el) {\n      var _x = 0;\n      var _y = 0;\n      while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft - el.scrollLeft;\n        _y += el.offsetTop - el.scrollTop;\n        el = el.offsetParent;\n      }\n      return { top: _y, left: _x };\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      let $slice = $timeline.getElementsByClassName(\"slice\")[index];\n      let duration =\n        this.slides[index].duration != undefined\n          ? this.slides[index].duration\n          : this.duration;\n\n      this.timeline.add({\n        duration: duration,\n        targets: $slice.getElementsByClassName(\"progress\"),\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.currentSlideIndex = index;\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n          }\n        },\n      });\n    });\n    this.hammer = new Hammer.Manager(this.$el, {\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        [Hammer.Tap],\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n    this.hammer.on(\"press\", () => {\n      this.timeline.pause();\n    });\n    this.hammer.on(\"pressup tap\", () => {\n      this.timeline.play();\n    });\n    // Tap on the side to navigate between slides\n    this.hammer.on(\"tap\", (event) => {\n      if (event.center.x - this.getOffset(this.$el).left > this.width / 3) {\n        this.nextSlide();\n      } else {\n        this.prevSlide();\n      }\n    });\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang='scss'>\n.story {\n  float: left;\n  position: relative;\n  z-index: 1;\n\n  .timeline {\n    display: flex;\n    flex-grow: 0;\n    position: absolute;\n    top: 5px;\n    left: 5px;\n    right: 5px;\n    z-index: 2;\n\n    & > .slice {\n      background: rgba(0, 0, 0, 0.7);\n      height: 5px;\n      margin: 5px;\n      width: 100%;\n      display: flex;\n      align-items: flex-start;\n      justify-content: left;\n      border-radius: 2px;\n\n      & > .progress {\n        background: rgba(255, 255, 255, 0.8);\n        height: 5px;\n        width: 0%;\n      }\n    }\n  }\n\n  .slideWrapper {\n    /* Take the rest of the page */\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n}\n</style>","import { render } from \"./Story.vue?vue&type=template&id=17049f7b\"\nimport script from \"./Story.vue?vue&type=script&lang=js\"\nexport * from \"./Story.vue?vue&type=script&lang=js\"\n\nimport \"./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0c87e85c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".story{float:left;position:relative;z-index:1}.story .timeline{display:flex;flex-grow:0;position:absolute;top:5px;left:5px;right:5px;z-index:2}.story .timeline>.slice{background:rgba(0,0,0,.7);height:5px;margin:5px;width:100%;display:flex;align-items:flex-start;justify-content:left;border-radius:2px}.story .timeline>.slice>.progress{background:hsla(0,0%,100%,.8);height:5px;width:0}.story .slideWrapper{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}