{"version":3,"sources":["webpack://vue3-insta-stories/./lib/components/Story.vue","webpack://vue3-insta-stories/./lib/components/Story.vue?7e18","webpack://vue3-insta-stories/./lib/components/Story.vue?a311","webpack://vue3-insta-stories/./lib/components/Story.vue?5635","webpack://vue3-insta-stories/./lib/components/Story.vue?c720","webpack://vue3-insta-stories/./lib/components/Story.vue?f46e"],"names":[],"mappings":"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","file":"vue3-insta-stories.common.3.js","sourcesContent":["<template>\n  <div class=\"story\" :style=\"'width:' + width + 'px; height:' + height + 'px;'\">\n    <div class=\"timeline\">\n      <div class=\"slice\" v-for=\"(slide_object, i) in slides\" :key=\"i\">\n        <div class=\"progress\">&nbsp;</div>\n      </div>\n    </div>\n    <div class=\"slideWrapper\">\n      <slot name=\"slide\" v-bind:slide=\"slides[currentSlideIndex]\"></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport anime from \"animejs/lib/anime.es.js\";\nimport Hammer from \"hammerjs\";\nexport default {\n  name: \"Story\",\n  props: {\n    slides: Array,\n    duration: Number,\n    width: Number,\n    height: Number,\n  },\n  data() {\n    const timeline = anime.timeline({\n      autoplay: false,\n      easing: \"linear\",\n    });\n    return {\n      currentSlideIndex: 0,\n      isActive: false,\n      timeline: timeline,\n    };\n  },\n  methods: {\n    activate: function () {\n      // Start timer\n      this.resetSlide();\n    },\n    deactivate: function () {\n      this.timeline.pause();\n    },\n    resetSlide: function () {\n      // Jump to beginning of the slide\n      let duration = 0;\n      // if (this.slides[this.currentSlideIndex].duration != undefined) {\n      // } else {\n      //   //Index * Default Duration\n      //   duration = this.currentSlideIndex * this.duration;\n      // }\n\n      //If custom duration is set, go through each duration and sum them togetehr\n      for (let index in this.slides) {\n        if (this.currentSlideIndex == 0) {\n          break;\n        }\n        if (this.currentSlideIndex == index) {\n          break;\n        }\n        if (this.slides[index].duration != undefined) {\n          duration += this.slides[index].duration;\n        } else {\n          duration += this.duration;\n        }\n      }\n\n      this.timeline.pause();\n      this.timeline.seek(duration);\n      this.timeline.play();\n    },\n    nextSlide: function () {\n      this.$emit(\"next_slide\");\n      if (this.currentSlideIndex < this.slides.length - 1) {\n        this.currentSlideIndex++;\n        this.resetSlide();\n      } else {\n        this.nextStory();\n      }\n    },\n    prevSlide: function () {\n      this.$emit(\"prev_slide\");\n      if (this.currentSlideIndex > 0) {\n        this.currentSlideIndex--;\n        this.resetSlide();\n      } else {\n        this.previousStory();\n      }\n    },\n    nextStory: function () {\n      this.$emit(\"next_story\");\n    },\n    previousStory: function () {\n      this.$emit(\"prev_story\");\n    },\n    getOffset(el) {\n      var _x = 0;\n      var _y = 0;\n      while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft - el.scrollLeft;\n        _y += el.offsetTop - el.scrollTop;\n        el = el.offsetParent;\n      }\n      return { top: _y, left: _x };\n    },\n  },\n  mounted() {\n    let $timeline = this.$el.getElementsByClassName(\"timeline\")[0];\n    // Add progress bars to the timeline animation group\n    this.slides.forEach((slide, index) => {\n      let $slice = $timeline.getElementsByClassName(\"slice\")[index];\n      let duration =\n        this.slides[index].duration != undefined\n          ? this.slides[index].duration\n          : this.duration;\n\n      this.timeline.add({\n        duration: duration,\n        targets: $slice.getElementsByClassName(\"progress\"),\n        width: \"100%\",\n        changeBegin: () => {\n          // Update the Vue componenet state when progress bar begins to play\n          this.currentSlideIndex = index;\n        },\n        complete: () => {\n          // Move to the next story when finished playing all slides\n          if (index === this.slides.length - 1) {\n            this.nextStory();\n          }\n        },\n      });\n    });\n    this.hammer = new Hammer.Manager(this.$el, {\n      recognizers: [\n        [Hammer.Pan, { direction: Hammer.DIRECTION_HORIZONTAL }],\n        [Hammer.Tap],\n        [Hammer.Press, { time: 1, threshold: 1000000 }],\n      ],\n    });\n    this.hammer.on(\"press\", () => {\n      this.timeline.pause();\n    });\n    this.hammer.on(\"pressup tap\", () => {\n      this.timeline.play();\n    });\n    // Tap on the side to navigate between slides\n    this.hammer.on(\"tap\", (event) => {\n      if (event.center.x - this.getOffset(this.$el).left > this.width / 3) {\n        this.nextSlide();\n      } else {\n        this.prevSlide();\n      }\n    });\n    // Handle swipe\n    this.hammer.on(\"pan\", (event) => {\n      if (event.isFinal) {\n        if (event.deltaX < 0) {\n          this.nextStory();\n        } else if (event.deltaX > 0) {\n          this.previousStory();\n        }\n      }\n    });\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang='scss'>\n.story {\n  float: left;\n  position: relative;\n  z-index: 1;\n\n  .timeline {\n    display: flex;\n    flex-grow: 0;\n    position: absolute;\n    top: 5px;\n    left: 5px;\n    right: 5px;\n    z-index: 2;\n\n    & > .slice {\n      background: rgba(0, 0, 0, 0.7);\n      height: 5px;\n      margin: 5px;\n      width: 100%;\n      display: flex;\n      align-items: flex-start;\n      justify-content: left;\n      border-radius: 2px;\n\n      & > .progress {\n        background: rgba(255, 255, 255, 0.8);\n        height: 5px;\n        width: 0%;\n      }\n    }\n  }\n\n  .slideWrapper {\n    /* Take the rest of the page */\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n  }\n}\n</style>","export { default } from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=script&lang=js\"; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=script&lang=js\"","import { render } from \"./Story.vue?vue&type=template&id=17049f7b\"\nimport script from \"./Story.vue?vue&type=script&lang=js\"\nexport * from \"./Story.vue?vue&type=script&lang=js\"\n\nimport \"./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Story.vue?vue&type=style&index=0&id=17049f7b&lang=scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0c87e85c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".story{float:left;position:relative;z-index:1}.story .timeline{display:flex;flex-grow:0;position:absolute;top:5px;left:5px;right:5px;z-index:2}.story .timeline>.slice{background:rgba(0,0,0,.7);height:5px;margin:5px;width:100%;display:flex;align-items:flex-start;justify-content:left;border-radius:2px}.story .timeline>.slice>.progress{background:hsla(0,0%,100%,.8);height:5px;width:0}.story .slideWrapper{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}